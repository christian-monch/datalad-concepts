id: https://concepts.datalad.org/ontology/provenance
name: provenance
title: Concepts for ascribing provenance to entities
description: >-
  Provided components are centered around the annotation of provenance of
  entities, following the [W3C PROV data model](https://www.w3.org/TR/prov-dm),
  and using the [W3C PROV ontology](https://www.w3.org/TR/prov-o).
prefixes:
  dlco: https://concepts.datalad.org/ontology/
  foaf: http://xmlns.com/foaf/spec/#term_
  linkml: https://w3id.org/linkml/
  prov: http://www.w3.org/ns/prov#
imports:
  - linkml:types
default_prefix: dlco


slots:
  agent:
    slot_uri: dlco:agent
    description: >-
      References an agent which influenced an entity.
    range: Agent
    domain: AgentInfluence
    exact_mappings:
      - prov:agent
    broad_mappings:
      - prov:influencer

  entity:
    slot_uri: dlco:entity
    description: >-
      References an entity which influenced an entity.
    range: Entity
    domain: EntityInfluence
    exact_mappings:
      - prov:entity
    broad_mappings:
      - prov:influencer

  # Commit was_generated_by CommitActivity
  was_generated_by:
    slot_uri: dlco:was_generated_by
    description: >-
      A generation is the completion of production of a new entity by an
      activity. This entity did not exist before generation and becomes
      available for usage after this generation.
    domain: Entity
    range: Activity
    exact_mappings:
      - prov:wasGeneratedBy

  # Commit was_derived_from Commit
  was_derived_from:
    slot_uri: dlco:was_derived_from
    description: >-
      A derivation is a transformation of an entity into another, an update
      of an entity resulting in a new one, or the construction of a new
      entity based on a pre-existing entity.
    domain: Entity
    range: Entity
    exact_mappings:
      - prov:wasDerivedFrom

  # Commit was_attributed_to Author
  was_attributed_to:
    slot_uri: dlco:was_attributed_to
    description: >-
      Attribution is the ascribing of an entity to an agent.
    domain: Entity
    range: Agent
    exact_mappings:
      - prov:wasAttributedTo

  # Commit was_associated_with Committer
  was_associated_with:
    slot_uri: dlco:was_associated_with
    description: >-
      An activity association is an assignment of responsibility to an agent
      for an activity, indicating that the agent had a role in the activity.
      It further allows for a plan to be specified, which is the plan intended
      by the agent to achieve some goals in the context of this activity.
    domain: Activity
    range: Agent
    exact_mappings:
      - prov:wasAssociatedWith

  was_informed_by:
    slot_uri: dlco:was_informed_by
    description: >-
      Communication is the exchange of an entity by two activities, one activity
      using the entity generated by the other.
    domain: Activity
    range: Activity
    exact_mappings:
      - prov:wasInformedBy

  # CommitActivity ended_at DateTime
  ended_at:
    slot_uri: dlco:ended_at
    description: >-
      End is when an activity is deemed to have been ended by an entity,
      known as trigger. The activity no longer exists after its end.
      Any usage, generation, or invalidation involving an activity
      precedes the activity's end.
    domain: Activity
    #range: datetime
    range: string
    exact_mappings:
      - prov:endedAtTime
    notes:
      - successful validation with `datetime` as a range and linkml-jsonschema-validate` depends on a patched linkml, see https://github.com/linkml/linkml/issues/1806
      - a related problem also exists for `linkml-validate`, we cannot have a more specific range right now

  # Commit generated_at DateTime (committer time)
  generated_at:
    slot_uri: dlco:generated_at
    description: >-
      (Date and) time at which the generation of an entity took place or was
      completed.
    domain: Entity
    range: datetime
    exact_mappings:
      - prov:generatedAtTime

  # Commit was_revision_of Dataset(unversioned concept)
  was_revision_of:
    slot_uri: dlco:was_revision_of
    description: >-
      A revision is a derivation for which the resulting entity is a revised
      version of some original. The implication here is that the resulting
      entity contains substantial content from the original. Revision is a
      particular case of derivation.
    domain: Entity
    range: Entity
    exact_mappings:
      - prov:wasRevisionOf

  # DataladRun acted_on_behalf_of Author
  acted_on_behalf_of:
    slot_uri: dlco:acted_on_behalf_of
    description: >-
      Delegation is the assignment of authority and responsibility to an
      agent (by itself or by another agent) to carry out a specific activity
      as a delegate or representative, while the agent it acts on behalf of
      retains some responsibility for the outcome of the delegated work.
    domain: Agent
    range: Agent
    exact_mappings:
      - prov:actedOnBehalfOf

  at_location:
    slot_uri: dlco:at_location
    description: >-
      A location can be an identifiable geographic place (ISO 19112),
      but it can also be a non-geographic place such as a directory,
      row, or column. As such, there are numerous ways in which
      location can be expressed, such as by a coordinate, address,
      landmark, and so forth.
    range: Location
    exact_mappings:
      - prov:atLocation

  qualified_attribution:
    slot_uri: dlco:qualified_attribution
    description: >-
      Attribution is the ascribing of an entity to an agent.
    exact_mappings:
      - prov:qualifiedAttribution
    range: Attribution

  influencer:
    slot_uri: dlco:influencer
    description: >-
      Reference the resource (Entity, Agent, or Activity) whose influence is
      being qualified in a qualified influence pattern.
    any_of:
      - range: Activity
      - range: Agent
      - range: Entity
    exact_mappings:
      - prov:influencer


classes:
  #
  # entities
  #
  Entity:
    class_uri: dlco:Entity
    mixin: true
    description: >-
      A physical, digital, conceptual, or other kind of thing with some
      fixed aspects; entities may be real or imaginary.
    exact_mappings:
      - prov:Entity

  #
  # activities
  #
  Activity:
    class_uri: dlco:Activity
    mixin: true
    description: >-
      An activity is something that occurs over a period of time and acts
      upon or with entities; it may include consuming, processing,
      transforming, modifying, relocating, using, or generating entities.
    exact_mappings:
      - prov:Activity

  #
  # agents
  #
  Agent:
    class_uri: dlco:Agent
    mixin: true
    description: >-
      Something that bears some form of responsibility for an activity
      taking place, for the existence of an entity, or for another
      agent's activity.
    slots:
      - name
    exact_mappings:
      - foaf:Agent
      - prov:Agent

  SoftwareAgent:
    is_a: Agent
    mixin: true
    class_uri: dlco:SoftwareAgent
    description: >-
      Running software.
    exact_mappings:
      - prov:SoftwareAgent

  Person:
    is_a: Agent
    mixin: true
    class_uri: dlco:Person
    description: >-
      Person agents are people.
    slots:
      - email
    exact_mappings:
      - foaf:Person
      - prov:Person

  #
  # basic relations
  #
  Influence:
    class_uri: dlco:Influence
    mixin: true
    description: >-
      Capacity of an entity, activity, or agent to have an effect on the
      character, development, or behavior of another.
    slots:
      - influencer
      - had_role
    exact_mappings:
      - prov:Influence

  AgentInfluence:
    class_uri: dlco:AgentInfluence
    mixin: true
    is_a: Influence
    description: >-
      Capacity of an agent to have an effect on the character, development,
      or behavior of another Entity, Agent, or Activity
    slots:
      - agent
    slot_usage:
      agent:
        equals_expression: "{influencer}"
        todos:
          - Ideally this would be a structured_alias to `influencer`. However, this does not seem to work at all in the way that it is described.
    exact_mappings:
      - prov:AgentInfluence

  Association:
    class_uri: dlco:Association
    mixin: true
    is_a: AgentInfluence
    description: >-
      Assignment of responsibility to an agent for an activity, indicating
      that the agent had a role in the activity.
    exact_mappings:
      - prov:Association
    broad_mappings:
      - prov:AgentInfluence
      - prov:Influence

  Attribution:
    class_uri: dlco:Attribution
    mixin: true
    is_a: AgentInfluence
    description: >-
      Attribution is the ascribing of an entity to an agent.
    exact_mappings:
      - prov:Attribution
    broad_mappings:
      - prov:AgentInfluence
      - prov:Influence

  EntityInfluence:
    class_uri: dlco:EntityInfluence
    mixin: true
    is_a: Influence
    description: >-
      Capacity of an entity to have an effect on the character, development,
      or behavior of another.
    slots:
      - entity
    slot_usage:
      entity:
        equals_expression: "{influencer}"
        todos:
          - Ideally this would be a structured_alias to `influencer`. However, this does not seem to work at all in the way that it is described.
    exact_mappings:
      - prov:EntityInfluence
    broad_mappings:
      - prov:Influence

  #
  # misc concepts
  #
  Location:
    class_uri: dlco:Location
    mixin: true
    description: >-
      A location can be an identifiable geographic place (ISO 19112),
      but it can also be a non-geographic place such as a directory,
      row, or column. As such, there are numerous ways in which location
      can be expressed, such as by a coordinate, address, landmark, and
      so forth.
    exact_mappings:
      - prov:Location
